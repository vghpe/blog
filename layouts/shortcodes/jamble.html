<div class="jamble-embed" style="margin: 1rem 0;">
  <div id="jamble-game"></div>
  <div id="jamble-debug" style="display:none;"></div>
  <!-- Shortcode: embeds Jamble and hides debug overlay -->
</div>

<script src="{{ "games/jamble/jamble.js" | relURL }}"></script>
<script>
(function () {
  function initJamble() {
    var gameRoot = document.getElementById('jamble-game');
    var debugRoot = document.getElementById('jamble-debug');
    if (!gameRoot || !(window.Jamble && Jamble.Game)) return;
    try {
      var game = new Jamble.Game(gameRoot, debugRoot);
      {{ with .Get "start" }}
      {{ if eq . "run" }}
      if (game.stateManager && typeof game.stateManager.forceRunState === 'function') {
        game.stateManager.forceRunState();
      }
      {{ end }}
      {{ end }}
      game.start();
    } catch (e) {
      console.error('Failed to start Jamble', e);
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initJamble, { once: true });
  } else {
    initJamble();
  }
})();
</script>

